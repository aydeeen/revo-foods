<?php
// phpcs:ignoreFile

/**
 * Map Block Template.
 *
 * @param   array $block The block settings and attributes.
 * @param   string $content The block inner HTML (empty).
 * @param   bool $is_preview True during AJAX preview.
 * @param   int|string $post_id The post ID this block is saved to.
 * @package FoundationPress
 */

// we can disable some phpcs rules because we are not in the global scope.
// phpcs:disable WordPress.NamingConventions.PrefixAllGlobals.NonPrefixedVariableFound
// phpcs:disable WordPress.WP.GlobalVariablesOverride.Prohibited

use FoundationPress\Blocks\Block_Map;

$settings = $block;
$block    = new Block_Map( $settings );

$id          = $block->get_anchor();
$class_names = $block->get_class_names();

$bg_image     = get_field( 'bg_image' ) ?: false;
$mobile_image = get_field( 'mobile_image' ) ?: false;
$title        = get_field( 'title' ) ?: false;
$description  = get_field( 'description' ) ?: false;
?>

<section id="<?php echo esc_attr( $id ); ?>" class="section section--full b-map <?php echo esc_attr( $class_names ); ?>" style="background-image: url('<?php echo esc_url( $bg_image['url'] ); ?>');">
   <div class="section__inner grid-x grid-padding-x grid-padding-y">
		<div class="cell">
         <div class="b-map__content-wrapper">
            <?php echo wp_get_attachment_image( $mobile_image, 'full', false, ['class' => 'margin-bottom-2 medium-margin-bottom-0 show-for-small-only'] ); ?>
            <h2 class="b-map__title"><?php echo wp_kses_post( $title ); ?></h2>
            <svg width="183" height="29" viewBox="0 0 183 29" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path fill-rule="evenodd" clip-rule="evenodd" d="M148.992 22.4735C148.992 22.4705 148.992 22.4685 148.992 22.4655C148.997 22.4885 149.003 22.5115 149.008 22.5345C149.003 22.5165 148.997 22.4955 148.992 22.4735ZM147.99 11.459C147.997 11.481 148.003 11.509 148.01 11.539C148.01 11.54 148.01 11.54 148.01 11.541C148.003 11.514 147.997 11.486 147.99 11.459ZM176.783 12.8003C175.075 13.2625 173.363 13.7147 171.669 14.2527C169.753 14.8622 167.824 15.4352 165.931 16.1672C163.685 17.0399 161.449 17.9584 159.215 18.887C157.602 19.5557 156.026 20.3709 154.413 21.0438C153.58 21.3911 152.733 21.6476 151.881 21.8899C151.226 22.0773 150.582 22.3088 149.922 22.462C149.717 22.4845 149.515 22.4945 149.309 22.4853C149.384 22.1131 149.479 21.7492 149.556 21.3744C149.633 20.9955 149.711 20.6149 149.789 20.2369C150.034 19.0352 150.306 17.8452 150.526 16.636C150.671 15.8316 150.799 15.0105 150.895 14.1927C150.945 13.7555 150.974 13.3275 150.983 12.8861C150.99 12.4797 150.921 12.0658 150.875 11.6678C150.795 10.9633 150.583 10.2571 150.295 9.66416C150.125 9.31107 149.906 9.00878 149.645 8.77644C149.359 8.52162 149.037 8.35507 148.707 8.23598C148.434 8.13688 148.133 8.11939 147.852 8.08442C147.582 8.05027 147.312 8.07526 147.043 8.09691C146.349 8.15187 145.677 8.45916 145.018 8.7323C144.514 8.94216 144.007 9.13952 143.502 9.34521C142.631 9.69914 141.754 10.0339 140.889 10.4178C139.04 11.2381 137.18 12.025 135.343 12.8919C133.076 13.962 130.81 15.0313 128.544 16.1014C126.448 17.0915 124.348 18.0775 122.227 18.9644C120.923 19.5115 119.598 19.9762 118.28 20.4567C116.956 20.938 115.624 21.3636 114.269 21.6367C112.888 21.8516 111.477 21.9665 110.091 21.7858C109.665 21.6867 109.255 21.5501 108.85 21.3536C108.592 21.177 108.35 20.983 108.111 20.7648C107.923 20.5483 107.746 20.321 107.578 20.0736C107.523 19.9612 107.472 19.848 107.425 19.7289C107.302 19.1992 107.219 18.6588 107.155 18.1117C107.103 17.1298 107.111 16.1414 107.098 15.1562C107.085 14.2443 107.072 13.3333 107.059 12.4214C107.04 11.034 107.022 9.63751 106.885 8.26013C106.709 6.48802 106.431 4.63846 105.712 3.11035C105.543 2.75393 105.313 2.41583 105.105 2.10188C104.888 1.77711 104.616 1.4973 104.355 1.23998C103.858 0.747817 103.324 0.387233 102.727 0.165719C102.432 0.0582931 102.107 0.0424707 101.804 0.0099931C101.739 0.00249827 101.674 0 101.608 0C101.386 0 101.161 0.0333103 100.942 0.0591258C100.197 0.149897 99.4509 0.325609 98.7291 0.577934C98.063 0.811107 97.4173 1.15753 96.7715 1.47565C96.1326 1.7896 95.49 2.08856 94.8535 2.41084C93.4724 3.11285 92.1147 3.90064 90.7676 4.71008C89.5077 5.46789 88.2676 6.284 87.0336 7.11675C86.3446 7.5831 85.6525 8.04278 84.9777 8.54493C83.9528 9.30608 82.9286 10.068 81.9049 10.8284C80.3413 11.9901 78.7765 13.1476 77.2153 14.3159C75.4594 15.6309 73.7028 16.9458 71.9468 18.2607C69.753 19.9021 67.5245 21.4768 65.218 22.8142C64.2934 23.3247 63.3594 23.8002 62.4193 24.2499C61.4915 24.6938 60.5458 25.0452 59.5747 25.2626C58.8164 25.3783 58.0618 25.4366 57.2998 25.3517C57.0543 25.2909 56.818 25.2126 56.5811 25.1068C56.4308 25.0011 56.291 24.8862 56.1518 24.7579C55.9799 24.5464 55.824 24.3307 55.6719 24.095C55.6317 24.0134 55.5939 23.9293 55.5593 23.8435C55.409 23.2489 55.3249 22.6344 55.2488 22.014C55.1795 21.1054 55.1461 20.1894 55.0973 19.2784C55.0503 18.3806 55.0027 17.4838 54.955 16.5869C54.8796 15.1512 54.7651 13.7072 54.574 12.2923C54.4627 11.4779 54.2617 10.6785 54.0662 9.89567C53.8454 9.01378 53.5609 8.15354 53.2114 7.35159C52.9127 6.6679 52.4989 6.06165 52.0752 5.51619C51.6299 4.94159 51.1029 4.45859 50.5766 4.03222C50.0533 3.60751 49.462 3.30772 48.8812 3.06705C48.1674 2.77059 47.3912 2.68231 46.6502 2.6057C43.7469 2.30591 40.8591 3.13117 38.0374 3.94478C35.1527 4.7767 32.3125 5.87761 29.4896 7.02682C28.2129 7.54646 26.9252 8.04028 25.6684 8.63987C23.6582 9.60087 21.6598 10.6027 19.6676 11.6311C16.387 13.3233 13.1286 15.0937 9.89008 16.925C9.01983 17.4188 8.15082 17.9143 7.28304 18.4156C6.49505 18.8711 5.71944 19.3733 4.9432 19.8671C3.28558 20.9256 1.64528 22.0315 0.00189243 23.1274C-0.00181865 23.129 0.000655405 23.1357 0.00312946 23.134C3.00725 21.974 5.98478 20.704 8.99385 19.5723C11.4178 18.6613 13.8331 17.7136 16.241 16.7301C18.9024 15.6417 21.554 14.5067 24.192 13.3183C24.9534 12.9744 25.7129 12.6255 26.4724 12.2715C27.8264 11.6403 29.2001 11.074 30.5682 10.4961C32.5945 9.63585 34.6337 8.82557 36.6909 8.10524C37.7177 7.74715 38.7524 7.4307 39.7872 7.11592C40.9104 6.77366 42.0349 6.45554 43.1742 6.22404C44.5844 5.9917 46.0119 5.92341 47.4252 6.12744C47.9176 6.24069 48.3889 6.39892 48.854 6.63625C49.2548 6.90107 49.6302 7.20169 49.9958 7.54729C50.3075 7.89288 50.5933 8.2593 50.8623 8.66818C51.1134 9.15118 51.3188 9.65833 51.5006 10.1955C51.8513 11.4146 52.1191 12.6596 52.2744 13.9512C52.45 15.894 52.5323 17.846 52.6276 19.798C52.6461 20.1861 52.6616 20.5741 52.6746 20.9614C52.7036 21.8233 52.7772 22.6693 52.8787 23.5196C52.9244 23.906 52.9801 24.2807 53.0531 24.6596C53.1267 25.041 53.2683 25.4058 53.4001 25.7547C53.5355 26.1161 53.7656 26.4376 53.9506 26.754C54.0848 26.9664 54.2289 27.1629 54.3854 27.3461C54.5524 27.526 54.72 27.7042 54.8907 27.8783C55.3898 28.3188 55.9273 28.6011 56.5075 28.7818C57.0976 28.9642 57.7216 28.9983 58.3235 29C59.738 29.0033 61.1426 28.6144 62.4885 28.064C63.1441 27.7958 63.788 27.4685 64.43 27.1471C65.0776 26.8207 65.7215 26.4834 66.3579 26.1203C67.7484 25.3258 69.0992 24.429 70.4432 23.5046C71.0296 23.1007 71.6209 22.7085 72.1961 22.2755C72.6136 21.9615 73.0305 21.6467 73.448 21.3311C74.6999 20.3893 75.9511 19.4474 77.2024 18.5039C78.6509 17.413 80.1001 16.3246 81.5499 15.2378C83.0733 14.0961 84.5967 12.9552 86.1201 11.8135C86.8642 11.2564 87.6237 10.7418 88.382 10.2213C90.0446 9.08539 91.7269 8.00531 93.4421 7.02015C94.5634 6.39225 95.6947 5.80516 96.8408 5.2622C97.9715 4.72924 99.1064 4.17129 100.29 3.90064C100.817 3.82319 101.337 3.77156 101.866 3.82569C101.942 3.84818 102.016 3.87399 102.09 3.90564C102.247 4.01223 102.396 4.12965 102.547 4.26122C102.745 4.4919 102.927 4.73423 103.101 4.99905C103.203 5.20641 103.296 5.41376 103.382 5.63611C103.637 6.58129 103.772 7.56977 103.892 8.56409C103.993 9.8432 103.998 11.1356 104.004 12.4214C104.009 13.3333 104.012 14.2443 104.017 15.1562C104.022 16.1755 103.998 17.1965 104.042 18.2124C104.061 18.6696 104.127 19.1301 104.179 19.5815C104.223 19.9629 104.28 20.3351 104.348 20.7107C104.424 21.1279 104.574 21.5201 104.698 21.914C104.779 22.1297 104.877 22.3304 104.992 22.5161C105.126 22.7659 105.269 23.0041 105.421 23.2331C105.609 23.5288 105.838 23.7744 106.061 24.0193C106.318 24.2999 106.586 24.5547 106.864 24.7979C107.099 25.0027 107.357 25.1535 107.615 25.3C107.934 25.4824 108.238 25.6331 108.57 25.7622C109.199 26.0054 109.878 26.0803 110.528 26.1486C111.27 26.2286 112.02 26.1744 112.761 26.1178C114.124 26.0137 115.472 25.7389 116.806 25.3483C118.247 24.9236 119.663 24.3432 121.083 23.8069C123.843 22.7659 126.521 21.3694 129.219 20.077C130.044 19.6806 130.862 19.255 131.684 18.8453C133.536 17.921 135.381 16.9683 137.245 16.0872C138.785 15.3577 140.324 14.6207 141.866 13.9012C142.592 13.564 143.332 13.2783 144.064 12.9669C144.46 12.7987 144.855 12.6313 145.25 12.4631C145.871 12.1991 146.498 11.9343 147.14 11.7752C147.388 11.7635 147.628 11.7727 147.873 11.8019C147.913 11.8135 147.954 11.826 147.993 11.8402C148.041 12.0533 148.079 12.264 148.112 12.4805C148.127 12.7837 148.125 13.0785 148.108 13.3816C147.879 15.0421 147.518 16.6643 147.13 18.2682C146.93 19.0893 146.746 19.9204 146.521 20.7299C146.446 20.9697 146.373 21.2104 146.303 21.4535C146.19 21.8449 146.181 22.2838 146.164 22.6977C146.182 22.885 146.201 23.0716 146.219 23.2589C146.235 23.4805 146.269 23.6961 146.323 23.9077C146.405 24.3057 146.558 24.6921 146.704 25.0527C146.751 25.1385 146.799 25.2218 146.847 25.3067C146.953 25.5565 147.091 25.763 147.263 25.9263C147.548 26.2427 147.823 26.4617 148.179 26.6133C148.8 26.8781 149.447 26.9197 150.093 26.8431C150.713 26.7707 151.329 26.6016 151.937 26.4259C152.516 26.2585 153.097 26.1028 153.675 25.9313C155.099 25.5057 156.482 24.842 157.847 24.16C160.49 22.8409 163.117 21.4793 165.73 20.062C169.347 18.0992 173 16.2663 176.645 14.4034C177.587 13.9237 178.527 13.4416 179.469 12.9652C180.641 12.3723 181.809 11.7552 182.998 11.2223C183.002 11.2214 183 11.2131 182.996 11.2148C180.914 11.6428 178.847 12.2432 176.783 12.8003Z" fill="#F9A259"/>
            </svg>
				<p class="b-map__description"><?php echo esc_html( $description ); ?></p>
         </div>
      </div>
   </div>
</section>

<?php
// important: reset $block variable to initial value.
$block = $settings;
