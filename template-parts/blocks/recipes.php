<?php
// phpcs:ignoreFile

/**
 * Recipes Block Template.
 *
 * @param   array $block The block settings and attributes.
 * @param   string $content The block inner HTML (empty).
 * @param   bool $is_preview True during AJAX preview.
 * @param   int|string $post_id The post ID this block is saved to.
 * @package FoundationPress
 */

// we can disable some phpcs rules because we are not in the global scope.
// phpcs:disable WordPress.NamingConventions.PrefixAllGlobals.NonPrefixedVariableFound
// phpcs:disable WordPress.WP.GlobalVariablesOverride.Prohibited

use FoundationPress\Blocks\Block_Recipes;

$settings = $block;
$block    = new Block_Recipes( $settings );

$id          = $block->get_anchor();
$class_names = $block->get_class_names();

$bg_image    = get_field( 'bg_image' ) ?: false;
$title       = get_field( 'title' ) ?: false;
$description = get_field( 'description' ) ?: false;
$button      = get_field( 'button' ) ?: false;
$button_text = get_field( 'button_text' ) ?: false;
?>

<section id="<?php echo esc_attr( $id ); ?>" class="section section--full b-recipes <?php echo esc_attr( $class_names ); ?>" style="background-image: url('<?php echo esc_url( $bg_image['url'] ); ?>');">
	<div class="section__inner grid-x grid-padding-x grid-padding-y align-middle">
      <div class="cell large-4">
         <div>
            <div class="b-recipes__title-wrapper">
               <h2><?php echo esc_html( $title ); ?></h2>
               <svg width="293" height="19" viewBox="0 0 293 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.79051 13.9594C6.79051 13.9601 6.79051 13.9614 6.79051 13.9621C6.79051 14.0492 6.83936 14.1337 6.91807 14.211C6.09707 14.2169 5.27336 14.2058 4.44964 14.1638C4.24066 14.1488 4.03304 14.1311 3.82812 14.1121C4.81468 14.0564 5.8026 14.0073 6.79051 13.9594ZM24.9891 14.0516C25.1451 14.068 25.2995 14.0844 25.4571 14.0994C24.4277 14.106 23.3966 14.1132 22.3672 14.1204C23.2422 14.0975 24.1156 14.0745 24.9891 14.0516ZM45.854 12.9709C53.0182 12.7346 60.1837 12.4952 67.3479 12.257C71.8436 12.108 76.3406 11.9425 80.8426 11.8228C88.8393 11.6096 96.8371 11.3958 104.834 11.1833C109.003 11.0728 113.172 10.9488 117.344 10.8657C123.733 10.7387 130.122 10.6104 136.512 10.4822C143.078 10.5274 149.644 10.575 156.211 10.6245C160.189 10.6532 164.169 10.6941 168.148 10.7088C173.113 10.7271 178.08 10.746 183.046 10.765C176.437 10.9182 169.828 11.0715 163.219 11.2254C151.185 11.5039 139.149 11.7513 127.112 12.009C114.913 12.2704 102.714 12.5062 90.5141 12.7505C86.3043 12.8354 82.0957 12.9044 77.8845 12.9789C75.5435 13.0204 73.2024 13.0619 70.8614 13.1029C69.3086 13.1023 67.7572 13.0998 66.2044 13.0992C64.7776 13.0992 63.3508 13.0839 61.9241 13.0754C58.2406 13.0552 54.5571 13.0332 50.8736 13.0125C49.0955 13.0015 47.3199 12.9911 45.543 12.9807C45.6462 12.9777 45.7508 12.9746 45.854 12.9709ZM85.9425 9.11934C89.3137 9.01732 92.6862 8.91313 96.0574 8.81039C99.8503 8.6939 103.646 8.55932 107.443 8.4696C111.985 8.36251 116.529 8.25543 121.071 8.14834C126.795 8.05283 132.518 7.95732 138.242 7.86182C135.003 8.00797 131.764 8.15413 128.525 8.29956C124.882 8.46381 121.235 8.61069 117.597 8.79953C116.012 8.88202 114.428 8.9645 112.844 9.04699C112.738 9.04626 112.634 9.04626 112.53 9.04554C109.193 9.03469 105.853 9.02311 102.515 9.01226C101.453 9.00719 100.39 8.99345 99.3295 9.00502C94.2753 9.06073 89.2223 9.11572 84.168 9.17216C84.7599 9.1548 85.3506 9.13815 85.9425 9.11934ZM73.2795 5.01754C68.669 4.98779 64.0571 4.95804 59.4453 4.92829C61.6034 4.8174 63.7602 4.70652 65.917 4.59563C73.5626 4.20348 81.2068 3.80997 88.8524 3.41713C89.7722 3.36913 90.6908 3.32248 91.6131 3.27515C95.6349 3.37454 99.6567 3.47528 103.68 3.57467C105.686 3.62403 107.684 3.68421 109.686 3.75993C122.185 4.22985 134.684 4.69773 147.181 5.16697C147.805 5.19063 148.43 5.21497 149.054 5.24066C143.805 5.2339 138.555 5.22782 133.308 5.22173C123.588 5.20889 113.867 5.16561 104.148 5.13248C93.8597 5.09665 83.5709 5.0838 73.2795 5.01754ZM139.511 2.18612C140.54 2.1596 141.574 2.16413 142.605 2.15895C146.156 2.13954 149.707 2.12014 153.258 2.10008C161.133 2.05738 169.008 2.01404 176.884 1.97069C177.929 1.96552 178.97 1.96164 180.014 1.97263C183.213 2.00821 186.413 2.04315 189.612 2.07808C197.428 2.16283 205.246 2.24758 213.063 2.33363C214.294 2.34721 215.523 2.36985 216.754 2.39508C220.703 2.4753 224.652 2.55617 228.602 2.63704C234.051 2.74767 239.503 2.84535 244.951 2.98897C251.15 3.152 257.353 3.28592 263.548 3.49747C265.628 3.56863 267.71 3.6385 269.79 3.70966C270.987 3.75042 272.187 3.78083 273.38 3.83258C273.653 3.84423 273.927 3.85587 274.201 3.86816C272.293 3.9128 270.385 3.95615 268.476 4.00337C268.229 3.98332 267.982 3.96456 267.734 3.95227C267.276 3.92768 266.827 3.92315 266.368 3.92186C266.357 3.92186 266.345 3.92186 266.333 3.92186C265.402 3.92186 264.472 3.96003 263.545 3.99173C263.316 4.00014 263.085 4.00531 262.855 4.01243C262.42 3.72972 261.761 3.54081 261.022 3.54728C257.106 3.57834 253.191 3.58739 249.277 3.67473C245.959 3.74848 242.643 3.82288 239.326 3.89663C234.851 3.99626 230.377 4.09071 225.901 4.18452C220.997 4.28673 216.095 4.39154 211.19 4.49828C209.846 4.52675 208.502 4.55651 207.158 4.58627C204.03 4.58109 200.901 4.57591 197.773 4.57139C194.745 4.56556 191.717 4.56039 188.69 4.55521C187.773 4.55327 186.861 4.55974 185.944 4.54033C180.464 4.42194 174.985 4.30549 169.504 4.1884C164.075 4.07195 158.647 3.95744 153.219 3.84035C152.607 3.82611 152 3.80412 151.389 3.78406C149.342 3.7129 147.294 3.64238 145.245 3.57122C136.731 3.27686 128.218 2.98315 119.703 2.68944C126.306 2.52188 132.908 2.35562 139.511 2.18612ZM221.044 7.28389C215.577 7.39226 210.113 7.53179 204.65 7.65929C191.891 7.95394 179.135 8.27054 166.38 8.5914C161.831 8.70544 157.283 8.81026 152.733 8.93563C149.884 9.01355 147.035 9.09358 144.186 9.1722C142.719 9.16512 141.252 9.15875 139.785 9.15308C147.183 8.83081 154.581 8.50995 161.98 8.18909C163.389 8.12818 164.804 8.09418 166.213 8.04885C170.055 7.92136 173.898 7.79457 177.739 7.66779C181.617 7.53958 185.494 7.41209 189.373 7.28389C192.597 7.24989 195.822 7.21306 199.046 7.16844C206.328 7.06503 213.611 6.96303 220.895 6.86033C224.73 6.8065 228.566 6.764 232.399 6.68538C234.586 6.64147 236.773 6.59614 238.961 6.55151C239.223 6.70451 239.559 6.82846 239.913 6.86883C240.012 6.88016 240.111 6.8922 240.208 6.90354C233.82 7.02961 227.431 7.15711 221.044 7.28389ZM176.865 12.4481C168.259 12.8683 159.655 13.2907 151.05 13.7124C149.478 13.7138 147.904 13.7152 146.332 13.7181C141.216 13.7275 136.101 13.7498 130.984 13.7498C127.225 13.7498 123.464 13.7541 119.703 13.7584C121.154 13.7267 122.605 13.6951 124.056 13.6634C135.481 13.4173 146.907 13.1496 158.335 12.8942C163.98 12.7668 169.625 12.6208 175.27 12.4855C175.803 12.4725 176.334 12.461 176.867 12.4481C176.866 12.4481 176.866 12.4481 176.865 12.4481ZM1.13675 15.1219C1.28824 15.158 1.44477 15.1941 1.60004 15.2288C1.69346 15.2455 1.78435 15.2642 1.87776 15.2815C2.06712 15.2956 2.25395 15.3076 2.4433 15.3203C2.64023 15.3343 2.87629 15.2669 3.01136 15.1954C3.02777 15.1867 3.04292 15.178 3.05681 15.1687C18.8969 15.0505 34.7371 14.9276 50.5784 14.804C51.6704 14.7947 52.7623 14.7746 53.853 14.7553C57.3889 14.6918 60.9248 14.6284 64.4581 14.5662C65.0375 14.5562 65.617 14.5455 66.1976 14.5355C67.2366 14.5415 68.2767 14.5422 69.3169 14.5442C72.7001 14.5542 76.0832 14.5636 79.4651 14.5729C85.585 14.5903 91.7049 14.6063 97.8249 14.625C106.762 14.6517 115.7 14.6611 124.637 14.6731C120.999 14.8374 117.361 15.0037 113.724 15.174C111.606 15.2729 109.489 15.3724 107.371 15.4719C103.937 15.4853 100.504 15.4973 97.07 15.5113C93.7904 15.5227 90.5133 15.522 87.2349 15.5207C85.7794 15.52 84.3214 15.52 82.8671 15.52C81.3144 15.5207 79.763 15.5207 78.2103 15.5207C74.6656 15.5207 71.1196 15.5207 67.5736 15.528C63.9254 15.536 60.2784 15.5447 56.6315 15.552C53.7735 15.5594 50.918 15.5594 48.0613 15.5761C44.7855 15.5968 41.5109 15.6288 38.2363 15.6542C37.9296 15.6562 37.6733 15.7865 37.6733 15.9508C37.6733 16.1197 37.9296 16.2406 38.2363 16.2486C38.8221 16.2647 39.4078 16.2907 39.9948 16.2887C40.3546 16.288 40.7143 16.2867 41.0754 16.286C42.3251 16.2827 43.5723 16.2787 44.8221 16.2747C46.092 16.2713 47.3607 16.2667 48.6319 16.26C52.804 16.2373 56.9761 16.2139 61.1482 16.1899C62.0899 16.1899 63.0316 16.1899 63.9746 16.1899C68.6138 16.1892 73.253 16.1972 77.8909 16.2046C82.3496 16.2119 86.807 16.2219 91.2656 16.2279C84.0437 16.5666 76.8229 16.9058 69.601 17.2445C56.9483 17.8369 61.3527 19.5286 76.2082 18.836C89.9679 18.1942 103.726 17.5497 117.485 16.9098C123.753 16.6193 130.024 16.3462 136.295 16.0723C140.11 16.0182 143.925 15.9635 147.74 15.908C151.139 15.8599 154.535 15.8118 157.935 15.7638C158.972 15.7484 160.011 15.7364 161.049 15.7077C167.926 15.5186 174.805 15.3276 181.682 15.1386C185.069 15.0458 188.459 14.9523 191.846 14.8588C192.911 14.8294 193.974 14.8027 195.039 14.7673C196.711 14.7112 198.383 14.6557 200.056 14.5996C202.74 14.5769 205.424 14.5549 208.107 14.5335C212.411 14.4968 216.715 14.4614 221.019 14.4053C232.141 14.2597 243.265 14.1154 254.388 14.0092C255.597 13.9972 256.808 13.9939 258.011 14.0506C258.684 14.1094 259.331 14.2002 259.98 14.3205C260.386 14.3933 260.889 14.3432 261.25 14.2316C261.618 14.1174 261.894 13.9284 262.006 13.7107C262.124 13.487 262.062 13.2412 261.84 13.0401C261.609 12.8304 261.273 12.7222 260.856 12.6394C260.653 12.5987 260.451 12.5613 260.247 12.5259C267.378 12.2814 274.508 12.041 281.637 11.8032C282.827 11.7638 284.017 11.7404 285.205 11.7131C286.314 11.6883 287.418 11.6483 288.52 11.5848C288.96 11.5594 289.397 11.524 289.833 11.488C290.46 11.4359 291.08 11.3457 291.7 11.2756C292.052 11.2355 292.375 11.0899 292.552 10.9283C292.758 10.7433 292.771 10.5536 292.697 10.3479C292.615 10.1235 292.356 9.96121 292.1 9.78756C292.053 9.75617 292.008 9.72411 291.961 9.69205C291.782 9.59721 291.571 9.53309 291.327 9.49703C291.204 9.479 291.076 9.46965 290.949 9.46965C290.695 9.46965 290.442 9.50504 290.223 9.57317C289.919 9.66734 289.688 9.81895 289.58 9.99594C289.57 9.99727 289.561 9.99861 289.551 9.99994C289.152 10.0514 288.75 10.0874 288.346 10.1188C285.942 10.2704 283.521 10.3052 281.108 10.404C279.344 10.4768 277.581 10.5489 275.815 10.6224C273.601 10.7146 271.385 10.8061 269.167 10.8956C263.463 11.128 257.76 11.3624 252.057 11.5888C241.364 12.0129 230.676 12.4544 219.98 12.8505C218.694 12.8985 217.406 12.946 216.12 12.9934C214.711 13.0154 213.299 13.0281 211.891 13.0455C208.896 13.0829 205.903 13.121 202.91 13.1584C206.625 13.0001 210.34 12.8424 214.056 12.6822C217.791 12.5212 221.529 12.3676 225.265 12.2133C230.996 11.9769 236.726 11.7244 242.46 11.504C247.865 11.2956 253.268 11.0806 258.673 10.8715C261.274 10.7727 263.879 10.6752 266.48 10.577C267.828 10.5269 269.175 10.4728 270.526 10.4321C271.426 10.4053 272.326 10.3746 273.224 10.3305C274.086 10.2871 274.939 10.209 275.795 10.1475C276.14 10.1222 276.476 10.0928 276.815 10.054C277.203 10.0086 277.56 9.90778 277.92 9.82563C278.35 9.72745 278.654 9.53577 278.926 9.34475C279.113 9.21518 279.207 9.08428 279.33 8.934C279.398 8.84852 279.465 8.76303 279.533 8.67754C279.543 8.65683 279.548 8.63613 279.556 8.61609C280.38 8.45179 280.981 8.02101 280.981 7.54014C280.981 6.90431 279.995 6.40541 278.811 6.39205C277.214 6.37535 275.616 6.366 274.019 6.364C273.64 6.36333 273.282 6.41743 272.969 6.5096C271.975 6.52696 270.981 6.54232 269.988 6.55835C268.278 6.58573 266.569 6.61312 264.858 6.64117C265.672 6.57438 266.487 6.50492 267.301 6.43746C269.639 6.41476 271.977 6.39004 274.314 6.35799C274.977 6.34864 275.57 6.17699 275.942 5.91451C276.002 5.91652 276.063 5.91718 276.122 5.92052C276.448 5.94791 276.767 5.9813 277.09 6.02137C277.783 6.10553 278.494 5.93789 278.783 5.59994C279.274 5.58925 279.767 5.5779 280.258 5.56054C280.77 5.54117 281.221 5.46369 281.592 5.268C281.945 5.081 282.146 4.8252 282.146 4.56005C282.146 4.34633 281.998 4.13928 281.76 3.96897C281.795 3.96964 281.831 3.97165 281.865 3.97298C283.239 4.03443 284.619 4.06047 285.989 4.14262C286.795 4.21208 287.61 4.29223 288.381 4.43382C288.423 4.50662 288.458 4.58009 288.488 4.65489C288.493 4.69697 288.498 4.73971 288.503 4.78245C288.534 5.0269 288.669 5.24262 289.003 5.41894C289.32 5.58792 289.758 5.68409 290.206 5.68409C290.657 5.68409 291.094 5.58792 291.411 5.41894C291.703 5.26533 291.953 5.00887 291.911 4.78245C291.869 4.56205 291.816 4.34566 291.744 4.1286C291.673 3.92022 291.456 3.71718 291.301 3.52417C291.226 3.47341 291.154 3.42198 291.08 3.37055C290.932 3.23831 290.73 3.13279 290.479 3.05264C290.171 2.93309 289.864 2.8476 289.503 2.77681C288.763 2.63254 287.99 2.56375 287.216 2.48561C286.061 2.3674 284.872 2.34001 283.701 2.30729C281.855 2.25586 280.012 2.16503 278.168 2.08689C275.3 1.966 272.435 1.86047 269.564 1.76296C266.888 1.67146 264.214 1.56594 261.538 1.49381C257.73 1.39028 253.917 1.2881 250.109 1.18525C247.653 1.11913 245.198 1.03831 242.743 0.986217C239.895 0.926775 237.047 0.86533 234.199 0.804553C229.825 0.712385 225.45 0.61955 221.076 0.526046C219.193 0.487309 217.314 0.429871 215.43 0.407163C208.651 0.329689 201.874 0.252215 195.096 0.174073C191.189 0.129325 187.281 0.0845768 183.374 0.0404966C182.205 0.0264711 181.031 -0.000244141 179.858 -0.000244141C179.729 -0.000244141 179.601 0.000423741 179.472 0.00109162C166.65 0.0698834 153.823 0.129325 141.001 0.208135C140.6 0.210138 140.197 0.228171 139.797 0.239525C138.7 0.267576 137.606 0.295627 136.507 0.324346C132.866 0.419185 129.224 0.514024 125.583 0.609532C116.971 0.832604 108.361 1.05835 99.7487 1.28209C97.3313 1.34554 94.9164 1.40765 92.499 1.4711C91.7617 1.49047 91.0321 1.5292 90.2961 1.56661C88.3874 1.52052 86.4788 1.47511 84.5701 1.42969C78.2343 1.27741 71.8997 1.1258 65.5665 0.974863C64.034 0.938129 62.5027 0.901396 60.9715 0.86533C59.3443 0.825925 57.712 0.810564 56.0823 0.791195C52.5755 0.747115 49.0674 0.721068 45.5605 0.680995C45.5504 0.680995 45.5403 0.680995 45.529 0.680995C44.6857 0.680995 43.9876 1.07237 43.9876 1.51318C43.9876 1.97401 44.7034 2.33534 45.5605 2.34536C49.0674 2.3861 52.5755 2.41548 56.0823 2.45823C57.712 2.47826 59.3443 2.49362 60.9715 2.53437C62.5027 2.57177 64.034 2.6085 65.5665 2.64724C66.3466 2.66594 67.1267 2.68597 67.9069 2.70468C59.9729 3.10741 52.039 3.51214 44.105 3.91488C41.55 4.04511 38.9963 4.17468 36.4425 4.30425C34.1349 4.4218 31.8311 4.56072 29.5298 4.70832C26.2325 4.68094 22.9365 4.64955 19.6405 4.62083C18.8793 4.61348 18.2468 4.96078 18.2468 5.3575C18.2468 5.38956 18.2569 5.42028 18.2645 5.45167C16.9617 5.53783 15.6602 5.62599 14.3562 5.71014C14.2123 5.72016 14.0671 5.73018 13.9232 5.7402C13.6442 5.7816 13.4044 5.85641 13.2011 5.9626C12.8969 6.12356 12.724 6.3453 12.724 6.57238C12.724 6.80079 12.8969 7.02253 13.2011 7.18349C13.4776 7.32842 13.9535 7.46199 14.3562 7.43595C18.7972 7.14876 23.2319 6.84487 27.6729 6.55702C29.5121 6.4368 31.3527 6.31324 33.1957 6.20504C43.9435 6.2912 54.6912 6.36934 65.4415 6.44548C74.7236 6.51026 84.007 6.55501 93.2892 6.59776C94.568 6.60443 95.848 6.61111 97.1268 6.61712C87.4697 6.86224 77.8126 7.10735 68.1556 7.35179C62.2439 7.50207 56.3335 7.65167 50.4219 7.80195C42.2115 8.00966 34.0074 8.28549 25.7983 8.53595C25.2681 8.55264 24.7959 8.63813 24.4122 8.83983C24.0474 9.03419 23.8378 9.3 23.8378 9.57384C23.8378 10.1155 24.7316 10.6444 25.7983 10.6111C32.567 10.4053 39.3346 10.1856 46.1046 9.99727C40.5755 10.1963 35.0463 10.3947 29.5197 10.5937C25.5748 10.7353 21.659 11.0185 17.733 11.2522C17.3985 11.2709 17.1233 11.3097 16.8759 11.4392C16.6487 11.5588 16.5199 11.7237 16.5199 11.8927C16.5199 12.063 16.6487 12.2267 16.8759 12.3462C17.0817 12.4557 17.4313 12.5519 17.733 12.5352C21.6943 12.3015 25.6493 12.0196 29.6283 11.8774C32.5986 11.7732 35.5677 11.6696 38.5355 11.5648C45.6565 11.3143 52.7749 11.0659 59.8959 10.8141C60.8389 10.7814 61.7794 10.7386 62.7249 10.7306C65.0969 10.7112 67.4676 10.6905 69.8396 10.6712C73.7567 10.6384 77.6738 10.605 81.5909 10.5723C78.7304 10.7106 75.8711 10.8482 73.0119 10.9864C69.9595 11.1333 66.9083 11.2943 63.8484 11.4032C58.1425 11.6055 52.4379 11.8099 46.7333 12.0129C46.6247 11.852 46.3407 11.7211 46.0087 11.7211C45.9948 11.7211 45.9809 11.7217 45.967 11.7217C38.2275 11.9655 30.4892 12.214 22.7522 12.4778C22.453 12.4871 22.1892 12.5553 22.0352 12.6948C21.9683 12.755 21.9417 12.8244 21.9342 12.8959C21.8534 12.8985 21.7726 12.9006 21.6918 12.9026C21.7145 12.8665 21.7297 12.8278 21.7297 12.7863C21.7297 12.592 21.404 12.3923 21.0164 12.407C17.8441 12.5325 14.6756 12.6695 11.5071 12.803C8.18452 12.944 4.87335 13.1423 1.56596 13.3514C1.30465 13.3674 1.08374 13.4135 0.942351 13.541C0.768145 13.6973 0.843887 13.871 1.0547 14.0032C1.23396 14.1141 1.39175 14.235 1.61645 14.3218C1.61898 14.3225 1.62276 14.3238 1.62529 14.3251C1.59878 14.3251 1.57101 14.3251 1.54324 14.3258C1.18346 14.3285 0.860297 14.454 0.76562 14.639C0.675993 14.808 0.808541 15.0451 1.13675 15.1219Z" fill="#F0555E"/>
               </svg>
            </div>
            <p class="b-recipes__description"><?php echo esc_html( $description ); ?></p>
            <div class="b-recipes__button-wrapper">
               <a href="<?php echo esc_url( $button ); ?>" class="button">
                  <?php echo esc_html( $button_text ); ?>
               </a>
            </div>
         </div>
      </div>
      <div class="cell large-4">
         <div class="b-recipes__2-recipes">
            <?php
            $args  = [
               'orderby'        => 'post_date',
               'post_type'      => 'recipes',
               'post_status'    => 'publish',
               'posts_per_page' => 2,
            ];
            $query = new WP_Query( $args );
            if ( $query->have_posts() ) :
               while ( $query->have_posts() ) :
                  $query->the_post();
                  ?>
                     <a href="<?php the_permalink(); ?>">
                        <?php the_post_thumbnail(); ?>
                        <h3><?php the_title(); ?></h3>
                     </a>
                  <?php
               endwhile;
            endif;
            wp_reset_postdata();
            ?>
         </div>
      </div>
      <div class="cell large-4">
         <div class="b-recipes__1-recipe">
            <?php
            $args  = [
               'orderby'        => 'post_date',
               'post_type'      => 'recipes',
               'post_status'    => 'publish',
               'posts_per_page' => '1',
               'offset'         => 2
            ];
            $query = new WP_Query( $args );
            if ( $query->have_posts() ) :
               while ( $query->have_posts() ) :
                  $query->the_post();
                  ?>
                     <a href="<?php the_permalink(); ?>">
                        <?php the_post_thumbnail(); ?>
                        <h3><?php the_title(); ?></h3>
                     </a>
                  <?php
               endwhile;
            endif;
            wp_reset_postdata();
            ?>
         </div>
      </div>
	</div>
</section>

<?php
// important: reset $block variable to initial value.
$block = $settings;

