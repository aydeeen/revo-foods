<?php
// phpcs:ignoreFile

/**
 * Mission Block Template.
 *
 * @param   array $block The block settings and attributes.
 * @param   string $content The block inner HTML (empty).
 * @param   bool $is_preview True during AJAX preview.
 * @param   int|string $post_id The post ID this block is saved to.
 * @package FoundationPress
 */

// we can disable some phpcs rules because we are not in the global scope.
// phpcs:disable WordPress.NamingConventions.PrefixAllGlobals.NonPrefixedVariableFound
// phpcs:disable WordPress.WP.GlobalVariablesOverride.Prohibited

use FoundationPress\Blocks\Block_Mission;

$settings = $block;
$block    = new Block_Mission( $settings );

$id          = $block->get_anchor();
$class_names = $block->get_class_names();

$title_1     = get_field( 'title_1' ) ?: false;
$description = get_field( 'description' ) ?: false;
$link        = get_field( 'link' ) ?: false;
$link_text   = get_field( 'link_text' ) ?: false;
$image_1     = get_field( 'image_1' ) ?: false;
$title_2     = get_field( 'title_2' ) ?: false;
$image_2     = get_field( 'image_2' ) ?: false;
?>

<section id="<?php echo esc_attr( $id ); ?>" class="section section--full b-mission <?php echo esc_attr( $class_names ); ?>">
	<div class="section__inner grid-x grid-padding-x grid-padding-y align-middle">
		<div class="cell medium-6">
			<div class="medium-margin-bottom-2 large-margin-bottom-3 b-mission__content-wrapper">
				<h2 class="b-mission__title">
               <svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.7156 7.99882C2.99661 8.011 2.41059 7.92878 1.95753 7.75214C1.50446 7.57551 1.12527 7.29228 0.819945 6.90247C0.465374 6.44565 0.243767 5.97666 0.155125 5.49548C0.066482 5.0143 0.0172361 4.53617 0.00738689 4.06108C-0.0024623 4.00626 -0.0024623 3.87683 0.00738689 3.67279C0.0172361 3.46874 0.0393967 3.23729 0.0738689 2.97843C0.108341 2.71957 0.152662 2.45614 0.206833 2.18814C0.261003 1.92014 0.33241 1.69783 0.421053 1.52119C0.647584 1.02783 1.0908 0.644108 1.75069 0.37002C2.41059 0.095931 3.23299 -0.0258862 4.21791 0.00456814C4.51339 -0.00761357 4.81133 0.0167499 5.11173 0.0776585C5.41213 0.138567 5.69775 0.231453 5.96861 0.356315C6.23946 0.481178 6.48323 0.633449 6.69991 0.81313C6.91659 0.99281 7.09388 1.19229 7.23176 1.41156C7.50754 1.85619 7.70452 2.30539 7.82271 2.75916C7.94091 3.21293 8 3.66517 8 4.1159C8 4.56662 7.94583 5.01125 7.83749 5.4498C7.72915 5.88834 7.58141 6.30861 7.39428 6.7106C7.30563 6.93597 7.1185 7.12935 6.83287 7.29076C6.54725 7.45217 6.22222 7.58464 5.8578 7.68819C5.49338 7.79173 5.11665 7.86787 4.72761 7.91659C4.33857 7.96532 4.00123 7.99273 3.7156 7.99882ZM5.55844 1.30536C5.95325 1.50842 6.28225 1.80057 6.54545 2.18182C6.5039 1.75084 6.30303 1.42139 5.94286 1.19347C5.58268 0.965553 5.05628 0.810153 4.36364 0.727273C4.76537 0.909609 5.16364 1.10231 5.55844 1.30536ZM2.90909 7.27273C2.60934 7.21414 2.34706 7.08523 2.12224 6.88602C1.89743 6.68681 1.72882 6.44951 1.61641 6.17413C1.504 5.89875 1.45014 5.60139 1.45483 5.28207C1.45951 4.96274 1.54147 4.6566 1.70072 4.36364C1.79439 4.62144 1.84357 4.88071 1.84825 5.14144C1.85293 5.40218 1.87401 5.65705 1.91148 5.90607C1.94895 6.15509 2.0356 6.39531 2.17142 6.62675C2.30725 6.85819 2.55314 7.07351 2.90909 7.27273ZM3.70138 3.61518C3.62914 3.84113 3.6171 4.09061 3.66526 4.36364C3.87397 4.20359 4.03452 4.06708 4.1469 3.9541C4.25928 3.84113 4.32751 3.73286 4.3516 3.6293C4.37568 3.52574 4.36364 3.41983 4.31547 3.31156C4.26731 3.2033 4.18704 3.06914 4.07465 2.90909C3.89805 3.15387 3.77363 3.38923 3.70138 3.61518ZM2.83153 5.81818C2.47245 5.69944 2.26598 5.58442 2.21212 5.4731C2.15825 5.36178 2.17621 5.23438 2.26598 5.09091C2.51733 5.20965 2.70136 5.32468 2.81806 5.43599C2.93477 5.54731 2.93925 5.67471 2.83153 5.81818ZM5.27273 6.10526C4.87879 6.21159 4.57576 6.35832 4.36364 6.54545C4.87879 6.54545 5.27273 6.52419 5.54545 6.48166C5.81818 6.43913 6.01515 6.38171 6.13636 6.30941C6.25758 6.23711 6.34091 6.1563 6.38636 6.06699C6.43182 5.97767 6.48485 5.89474 6.54545 5.81818C6.09091 5.90324 5.66667 5.99894 5.27273 6.10526Z" fill="#F9A259"/>
               </svg>
               <?php echo esc_html( $title_1 ); ?>
		      </h2>
				<p class="b-mission__description"><?php echo esc_html( $description ); ?></p>
            <?php if ( $link ) : ?>
               <a href="<?php echo esc_url( $link ); ?>" class="b-mission__link">
                  <?php echo esc_html( $link_text ); ?>
               </a>
            <?php endif; ?>
			</div>
		</div>

		<div class="cell medium-6">
			<div class="margin-bottom-1 medium-margin-bottom-2 large-margin-bottom-3 position-relative">
            <img src="<?php fopr_assets_uri(); ?>/images/patterns.png" alt="Patterns" class="show-for-medium">
				<?php echo wp_get_attachment_image( $image_1, 'full', false, ['class' => 'b-mission__image b-mission__image--1'] ); ?>
			</div>
		</div>

      <div class="cell medium-6">
			<div class="position-relative">
            <img src="<?php fopr_assets_uri(); ?>/images/patterns.png" alt="Patterns" class="show-for-medium">
				<?php echo wp_get_attachment_image( $image_2, 'full', false, ['class' => 'b-mission__image b-mission__image--2'] ); ?>
			</div>
		</div>

      <div class="cell medium-6">
         <div class="b-mission__content-wrapper b-mission__content-wrapper--2">
				<h2 class="b-mission__title">
               <svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.7156 7.99882C2.99661 8.011 2.41059 7.92878 1.95753 7.75214C1.50446 7.57551 1.12527 7.29228 0.819945 6.90247C0.465374 6.44565 0.243767 5.97666 0.155125 5.49548C0.066482 5.0143 0.0172361 4.53617 0.00738689 4.06108C-0.0024623 4.00626 -0.0024623 3.87683 0.00738689 3.67279C0.0172361 3.46874 0.0393967 3.23729 0.0738689 2.97843C0.108341 2.71957 0.152662 2.45614 0.206833 2.18814C0.261003 1.92014 0.33241 1.69783 0.421053 1.52119C0.647584 1.02783 1.0908 0.644108 1.75069 0.37002C2.41059 0.095931 3.23299 -0.0258862 4.21791 0.00456814C4.51339 -0.00761357 4.81133 0.0167499 5.11173 0.0776585C5.41213 0.138567 5.69775 0.231453 5.96861 0.356315C6.23946 0.481178 6.48323 0.633449 6.69991 0.81313C6.91659 0.99281 7.09388 1.19229 7.23176 1.41156C7.50754 1.85619 7.70452 2.30539 7.82271 2.75916C7.94091 3.21293 8 3.66517 8 4.1159C8 4.56662 7.94583 5.01125 7.83749 5.4498C7.72915 5.88834 7.58141 6.30861 7.39428 6.7106C7.30563 6.93597 7.1185 7.12935 6.83287 7.29076C6.54725 7.45217 6.22222 7.58464 5.8578 7.68819C5.49338 7.79173 5.11665 7.86787 4.72761 7.91659C4.33857 7.96532 4.00123 7.99273 3.7156 7.99882ZM5.55844 1.30536C5.95325 1.50842 6.28225 1.80057 6.54545 2.18182C6.5039 1.75084 6.30303 1.42139 5.94286 1.19347C5.58268 0.965553 5.05628 0.810153 4.36364 0.727273C4.76537 0.909609 5.16364 1.10231 5.55844 1.30536ZM2.90909 7.27273C2.60934 7.21414 2.34706 7.08523 2.12224 6.88602C1.89743 6.68681 1.72882 6.44951 1.61641 6.17413C1.504 5.89875 1.45014 5.60139 1.45483 5.28207C1.45951 4.96274 1.54147 4.6566 1.70072 4.36364C1.79439 4.62144 1.84357 4.88071 1.84825 5.14144C1.85293 5.40218 1.87401 5.65705 1.91148 5.90607C1.94895 6.15509 2.0356 6.39531 2.17142 6.62675C2.30725 6.85819 2.55314 7.07351 2.90909 7.27273ZM3.70138 3.61518C3.62914 3.84113 3.6171 4.09061 3.66526 4.36364C3.87397 4.20359 4.03452 4.06708 4.1469 3.9541C4.25928 3.84113 4.32751 3.73286 4.3516 3.6293C4.37568 3.52574 4.36364 3.41983 4.31547 3.31156C4.26731 3.2033 4.18704 3.06914 4.07465 2.90909C3.89805 3.15387 3.77363 3.38923 3.70138 3.61518ZM2.83153 5.81818C2.47245 5.69944 2.26598 5.58442 2.21212 5.4731C2.15825 5.36178 2.17621 5.23438 2.26598 5.09091C2.51733 5.20965 2.70136 5.32468 2.81806 5.43599C2.93477 5.54731 2.93925 5.67471 2.83153 5.81818ZM5.27273 6.10526C4.87879 6.21159 4.57576 6.35832 4.36364 6.54545C4.87879 6.54545 5.27273 6.52419 5.54545 6.48166C5.81818 6.43913 6.01515 6.38171 6.13636 6.30941C6.25758 6.23711 6.34091 6.1563 6.38636 6.06699C6.43182 5.97767 6.48485 5.89474 6.54545 5.81818C6.09091 5.90324 5.66667 5.99894 5.27273 6.10526Z" fill="#F9A259"/>
               </svg>
               <?php echo esc_html( $title_2 ); ?>
		      </h2>
            <ul class="b-mission__list">
               <?php if ( have_rows('list') ): ?>
                  <?php while ( have_rows( 'list' ) ): the_row();
                     $list_item = get_sub_field( 'list_item' ) ?: false;
                     ?>
                        <li>
                           <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M16.6274 1.16348C17.2175 0.597626 18.2241 -0.357246 19.1266 0.137873C21.1677 1.2552 19.1448 3.68017 17.9857 5.06973C17.8241 5.26345 17.6793 5.43705 17.5646 5.58418C16.5694 6.88107 15.5434 8.14655 14.5173 9.41202C14.0045 10.0445 13.4916 10.677 12.9827 11.3135C12.517 11.8856 12.0729 12.4799 11.6269 13.0766C10.9428 13.9919 10.2543 14.9131 9.47679 15.7695C9.43703 15.8139 9.39572 15.8603 9.35295 15.9083C8.61162 16.7404 7.43196 18.0644 6.28333 17.9976C5.27669 17.9622 4.4089 17.2195 3.74938 16.5122C2.18736 14.8501 0.069957 12.233 0.000533834 9.79274C-0.0341777 7.91836 1.63198 8.48421 2.63861 9.26226C3.56343 9.99246 4.34965 10.8325 5.14088 11.6779C5.53755 12.1018 5.93547 12.5269 6.35275 12.9403C6.90813 11.8793 7.81063 10.9598 8.64371 10.111L8.64371 10.111C9.54828 9.16744 10.3994 8.21025 11.2551 7.2479C11.7785 6.65925 12.3037 6.06866 12.8438 5.47808C13.3577 4.91211 13.8493 4.32349 14.3409 3.73487C15.0781 2.85228 15.8153 1.96969 16.6274 1.16348ZM1.38894 9.68659C1.45836 9.65128 1.49307 9.65128 1.52779 9.65128C1.28481 9.50976 1.11125 9.47439 1.00711 9.54512C1.14596 9.61586 1.25009 9.65128 1.38894 9.68659Z" fill="#9BD6D7"/>
                           </svg>
                           <span><?php echo esc_html( $list_item ); ?></span>
                        </li>
                  <?php endwhile; ?>
               <?php endif; ?>
            </ul>
			</div>
		</div>
	</div>
</section>

<?php
// important: reset $block variable to initial value.
$block = $settings;
